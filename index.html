<!DOCTYPE html>
<!-- saved from url=(0067)file:///C:/Users/djask/Downloads/emotion_map_lang_toggle%20(1).html -->
<html lang="ko"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>Emotion Open Source Map</title>
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./Emotion Open Source Map_files/leaflet.css">
  <style>
    body { margin: 0; font-family: Arial, sans-serif; }
    #map { height: 80vh; }
    #form-container {
      padding: 10px;
      background: #f8f9fa;
      border-bottom: 1px solid #ccc;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
    }
    input, select, button {
      padding: 8px;
      font-size: 14px;
    }
    #qr-section {
      padding: 10px;
      text-align: center;
    }
    #qr-section img {
      width: 100px;
      height: 100px;
    }
  </style>
</head>
<body class="">

  <div id="form-container">
    <select id="languageToggle" onchange="toggleLanguage()">
      <option value="ko">í•œêµ­ì–´</option>
      <option value="en">English</option>
    </select>
    <input type="text" id="nicknameInput" placeholder="ë‹‰ë„¤ì„" size="10">
    <input type="text" id="lyricInput" placeholder="ê°€ì‚¬ í•œ ì¤„ì„ ì…ë ¥í•˜ì„¸ìš”" size="40">
    <select id="colorSelect">
      <option value="red">ë¹¨ê°„ìƒ‰</option>
      <option value="blue">íŒŒë€ìƒ‰</option>
      <option value="green">ì´ˆë¡ìƒ‰</option>
      <option value="pink">í•‘í¬ìƒ‰</option>
      <option value="yellow">ë…¸ë€ìƒ‰</option>
      <option value="purple">ë³´ë¼ìƒ‰</option>
      <option value="white">í•˜ì–€ìƒ‰</option>
    </select>
    <input type="text" id="searchInput" placeholder="ì£¼ì†Œ ë˜ëŠ” ì¥ì†Œëª… ê²€ìƒ‰" size="25">
    <button id="searchBtn" onclick="searchLocation()">ê²€ìƒ‰</button>
    <button id="addBtn" onclick="addLyric()">ì§€ë„ì— ì¶”ê°€</button>
  </div>

  <div id="map" class="leaflet-container leaflet-touch leaflet-retina leaflet-fade-anim leaflet-grab leaflet-touch-drag leaflet-touch-zoom" tabindex="0" style="position: relative; outline-style: none;"><div class="leaflet-pane leaflet-map-pane" style="transform: translate3d(499.066px, -44.0245px, 0px);"><div class="leaflet-pane leaflet-tile-pane"><div class="leaflet-layer " style="z-index: 1; opacity: 1;"><div class="leaflet-tile-container leaflet-zoom-animated" style="z-index: 18; transform: translate3d(-3px, 297px, 0px) scale(1);"><img alt="" src="./Emotion Open Source Map_files/99.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(251px, -135px, 0px); opacity: 1;"><img alt="" src="./Emotion Open Source Map_files/98.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(251px, -391px, 0px); opacity: 1;"><img alt="" src="./Emotion Open Source Map_files/99(1).png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(-5px, -135px, 0px); opacity: 1;"><img alt="" src="./Emotion Open Source Map_files/99(2).png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(507px, -135px, 0px); opacity: 1;"><img alt="" src="./Emotion Open Source Map_files/100.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(251px, 121px, 0px); opacity: 1;"><img alt="" src="./Emotion Open Source Map_files/98(1).png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(-5px, -391px, 0px); opacity: 1;"><img alt="" src="./Emotion Open Source Map_files/98(2).png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(507px, -391px, 0px); opacity: 1;"><img alt="" src="./Emotion Open Source Map_files/100(1).png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(-5px, 121px, 0px); opacity: 1;"><img alt="" src="./Emotion Open Source Map_files/100(2).png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(507px, 121px, 0px); opacity: 1;"><img alt="" src="./Emotion Open Source Map_files/99(3).png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(-261px, -135px, 0px); opacity: 1;"><img alt="" src="./Emotion Open Source Map_files/99(4).png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(763px, -135px, 0px); opacity: 1;"><img alt="" src="./Emotion Open Source Map_files/98(3).png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(-261px, -391px, 0px); opacity: 1;"><img alt="" src="./Emotion Open Source Map_files/98(4).png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(763px, -391px, 0px); opacity: 1;"><img alt="" src="./Emotion Open Source Map_files/100(3).png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(-261px, 121px, 0px); opacity: 1;"><img alt="" src="./Emotion Open Source Map_files/100(4).png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(763px, 121px, 0px); opacity: 1;"><img alt="" src="./Emotion Open Source Map_files/99(5).png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(-517px, -135px, 0px); opacity: 1;"><img alt="" src="./Emotion Open Source Map_files/99(6).png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(1019px, -135px, 0px); opacity: 1;"><img alt="" src="./Emotion Open Source Map_files/98(5).png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(-517px, -391px, 0px); opacity: 1;"><img alt="" src="./Emotion Open Source Map_files/98(6).png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(1019px, -391px, 0px); opacity: 1;"><img alt="" src="./Emotion Open Source Map_files/100(5).png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(-517px, 121px, 0px); opacity: 1;"><img alt="" src="./Emotion Open Source Map_files/100(6).png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(1019px, 121px, 0px); opacity: 1;"></div><div class="leaflet-tile-container leaflet-zoom-animated" style="z-index: 17; transform: translate3d(-384px, 132px, 0px) scale(2);"></div></div></div><div class="leaflet-pane leaflet-overlay-pane"></div><div class="leaflet-pane leaflet-shadow-pane"></div><div class="leaflet-pane leaflet-marker-pane"><img src="./Emotion Open Source Map_files/chart" class="leaflet-marker-icon leaflet-zoom-animated leaflet-interactive" alt="Marker" tabindex="0" role="button" style="margin-left: -10px; margin-top: -34px; width: 21px; height: 34px; transform: translate3d(362px, 581px, 0px); z-index: 581;"><img src="./Emotion Open Source Map_files/chart(1)" class="leaflet-marker-icon leaflet-zoom-animated leaflet-interactive" alt="Marker" tabindex="0" role="button" style="margin-left: -10px; margin-top: -34px; width: 21px; height: 34px; transform: translate3d(67px, 200px, 0px); z-index: 200;"><img src="./Emotion Open Source Map_files/chart(1)" class="leaflet-marker-icon leaflet-zoom-animated leaflet-interactive" alt="Marker" tabindex="0" role="button" style="margin-left: -10px; margin-top: -34px; width: 21px; height: 34px; transform: translate3d(417px, 151px, 0px); z-index: 151;"><img src="./Emotion Open Source Map_files/chart(1)" class="leaflet-marker-icon leaflet-zoom-animated leaflet-interactive" alt="Marker" tabindex="0" role="button" style="margin-left: -10px; margin-top: -34px; width: 21px; height: 34px; transform: translate3d(75px, 191px, 0px); z-index: 191;"><img src="./Emotion Open Source Map_files/chart(1)" class="leaflet-marker-icon leaflet-zoom-animated leaflet-interactive" alt="Marker" tabindex="0" role="button" style="margin-left: -10px; margin-top: -34px; width: 21px; height: 34px; transform: translate3d(188px, 258px, 0px); z-index: 258;"><img src="./Emotion Open Source Map_files/chart(1)" class="leaflet-marker-icon leaflet-zoom-animated leaflet-interactive" alt="Marker" tabindex="0" role="button" style="margin-left: -10px; margin-top: -34px; width: 21px; height: 34px; transform: translate3d(92px, 369px, 0px); z-index: 369;"><img src="./Emotion Open Source Map_files/chart(1)" class="leaflet-marker-icon leaflet-zoom-animated leaflet-interactive" alt="Marker" tabindex="0" role="button" style="margin-left: -10px; margin-top: -34px; width: 21px; height: 34px; transform: translate3d(367px, 371px, 0px); z-index: 371;"><img src="./Emotion Open Source Map_files/chart(1)" class="leaflet-marker-icon leaflet-zoom-animated leaflet-interactive" alt="Marker" tabindex="0" role="button" style="margin-left: -10px; margin-top: -34px; width: 21px; height: 34px; transform: translate3d(150px, 478px, 0px); z-index: 478;"><img src="./Emotion Open Source Map_files/chart(1)" class="leaflet-marker-icon leaflet-zoom-animated leaflet-interactive" alt="Marker" tabindex="0" role="button" style="margin-left: -10px; margin-top: -34px; width: 21px; height: 34px; transform: translate3d(380px, 458px, 0px); z-index: 458;"></div><div class="leaflet-pane leaflet-tooltip-pane"></div><div class="leaflet-pane leaflet-popup-pane"><div class="leaflet-popup  leaflet-zoom-animated" style="opacity: 1; transform: translate3d(362px, 581px, 0px); bottom: -7px; left: -174px;"><div class="leaflet-popup-content-wrapper"><div class="leaflet-popup-content" style="width: 301px;"><b>í•œë¡œë¡œ</b>: ì°¨ê°€ì› ë˜ ì—¬ë¦„ë„ ìš¸ì–´ë²„ë¦° ê°€ì„ë„ ë‚¨ê¸°ì§€ ëª»í•´ ë©ë“  ê²¨ìš¸ì„ ë‚œ ì•ˆì„ë˜ìš”</div></div><div class="leaflet-popup-tip-container"><div class="leaflet-popup-tip"></div></div><a class="leaflet-popup-close-button" role="button" aria-label="Close popup" href="file:///C:/Users/djask/Downloads/emotion_map_lang_toggle%20(1).html#close"><span aria-hidden="true">Ã—</span></a></div><div class="leaflet-popup  leaflet-zoom-animated" style="opacity: 1; transform: translate3d(67px, 200px, 0px); bottom: -7px; left: -174px;"><div class="leaflet-popup-content-wrapper"><div class="leaflet-popup-content" style="width: 301px;"><b>ë‚˜ìƒí˜„ì”¨ë°´ë“œ</b>: ë†“ì³ë²„ë¦° ê·¸ ë§ˆìŒë„ ì§€ë‚˜ì³¤ë˜ ì‚¬ë‘ë„ ë‹¤ ì•ˆê³  ê°€ì•¼ì§€</div></div><div class="leaflet-popup-tip-container"><div class="leaflet-popup-tip"></div></div><a class="leaflet-popup-close-button" role="button" aria-label="Close popup" href="file:///C:/Users/djask/Downloads/emotion_map_lang_toggle%20(1).html#close"><span aria-hidden="true">Ã—</span></a></div><div class="leaflet-popup  leaflet-zoom-animated" style="opacity: 1; transform: translate3d(417px, 151px, 0px); bottom: -7px; left: -102px;"><div class="leaflet-popup-content-wrapper"><div class="leaflet-popup-content" style="width: 158px;"><b>í˜ì˜¤</b>: everyday is yesterday</div></div><div class="leaflet-popup-tip-container"><div class="leaflet-popup-tip"></div></div><a class="leaflet-popup-close-button" role="button" aria-label="Close popup" href="file:///C:/Users/djask/Downloads/emotion_map_lang_toggle%20(1).html#close"><span aria-hidden="true">Ã—</span></a></div><div class="leaflet-popup  leaflet-zoom-animated" style="opacity: 1; transform: translate3d(75px, 191px, 0px); bottom: -7px; left: -164px;"><div class="leaflet-popup-content-wrapper"><div class="leaflet-popup-content" style="width: 281px;"><b>ë“œë˜ê³¤í¬ë‹ˆ</b>: ë§ˆì¹¨ë‚´ ì°¾ê²Œ ëœ ê³³ì´ ë˜ ë‹¤ë¥¸ ë©¸ë§ì´ë¼ë„</div></div><div class="leaflet-popup-tip-container"><div class="leaflet-popup-tip"></div></div><a class="leaflet-popup-close-button" role="button" aria-label="Close popup" href="file:///C:/Users/djask/Downloads/emotion_map_lang_toggle%20(1).html#close"><span aria-hidden="true">Ã—</span></a></div><div class="leaflet-popup  leaflet-zoom-animated" style="opacity: 1; transform: translate3d(188px, 258px, 0px); bottom: -7px; left: -111px;"><div class="leaflet-popup-content-wrapper"><div class="leaflet-popup-content" style="width: 176px;"><b>ì¥ê¸°í•˜</b>: ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹</div></div><div class="leaflet-popup-tip-container"><div class="leaflet-popup-tip"></div></div><a class="leaflet-popup-close-button" role="button" aria-label="Close popup" href="file:///C:/Users/djask/Downloads/emotion_map_lang_toggle%20(1).html#close"><span aria-hidden="true">Ã—</span></a></div><div class="leaflet-popup  leaflet-zoom-animated" style="opacity: 1; transform: translate3d(92px, 369px, 0px); bottom: -7px; left: -114px;"><div class="leaflet-popup-content-wrapper"><div class="leaflet-popup-content" style="width: 182px;"><b>ë‹¨í¸ì„  ìˆœê°„ë“¤</b>: ì† ë¼ˆ ì¶•ì¶• ìˆ² íƒœì–‘</div></div><div class="leaflet-popup-tip-container"><div class="leaflet-popup-tip"></div></div><a class="leaflet-popup-close-button" role="button" aria-label="Close popup" href="file:///C:/Users/djask/Downloads/emotion_map_lang_toggle%20(1).html#close"><span aria-hidden="true">Ã—</span></a></div><div class="leaflet-popup  leaflet-zoom-animated" style="opacity: 1; transform: translate3d(367px, 371px, 0px); bottom: -7px; left: -147px;"><div class="leaflet-popup-content-wrapper"><div class="leaflet-popup-content" style="width: 247px;"><b>ì†¡ì†Œí¬</b>: ë§ˆìŒì„ë…¸ì˜¤ì˜¤ì˜¤ì˜¤ì˜¤ì˜¿ì•„ì•„ì•„ì•„ì•„ì•„ì•„</div></div><div class="leaflet-popup-tip-container"><div class="leaflet-popup-tip"></div></div><a class="leaflet-popup-close-button" role="button" aria-label="Close popup" href="file:///C:/Users/djask/Downloads/emotion_map_lang_toggle%20(1).html#close"><span aria-hidden="true">Ã—</span></a></div><div class="leaflet-popup  leaflet-zoom-animated" style="opacity: 1; transform: translate3d(150px, 478px, 0px); bottom: -7px; left: -149px;"><div class="leaflet-popup-content-wrapper"><div class="leaflet-popup-content" style="width: 252px;"><b>ìœ¤ë§ˆì¹˜</b>: ì´ íœ˜ë‚ ë¦¬ëŠ” ë°±ê¸° í•˜ë‚˜ ëˆ„ê°€ ë­ë¼ í• ê¹Œ?</div></div><div class="leaflet-popup-tip-container"><div class="leaflet-popup-tip"></div></div><a class="leaflet-popup-close-button" role="button" aria-label="Close popup" href="file:///C:/Users/djask/Downloads/emotion_map_lang_toggle%20(1).html#close"><span aria-hidden="true">Ã—</span></a></div><div class="leaflet-popup  leaflet-zoom-animated" style="opacity: 1; transform: translate3d(380px, 458px, 0px); bottom: -7px; left: -80px;"><div class="leaflet-popup-content-wrapper"><div class="leaflet-popup-content" style="width: 114px;"><b>ADOY</b>: I am a lover</div></div><div class="leaflet-popup-tip-container"><div class="leaflet-popup-tip"></div></div><a class="leaflet-popup-close-button" role="button" aria-label="Close popup" href="file:///C:/Users/djask/Downloads/emotion_map_lang_toggle%20(1).html#close"><span aria-hidden="true">Ã—</span></a></div></div><div class="leaflet-proxy leaflet-zoom-animated" style="transform: translate3d(56077.4px, 25518px, 0px) scale(128);"></div></div><div class="leaflet-control-container"><div class="leaflet-top leaflet-left"><div class="leaflet-control-zoom leaflet-bar leaflet-control"><a class="leaflet-control-zoom-in" href="file:///C:/Users/djask/Downloads/emotion_map_lang_toggle%20(1).html#" title="Zoom in" role="button" aria-label="Zoom in" aria-disabled="false"><span aria-hidden="true">+</span></a><a class="leaflet-control-zoom-out" href="file:///C:/Users/djask/Downloads/emotion_map_lang_toggle%20(1).html#" title="Zoom out" role="button" aria-label="Zoom out" aria-disabled="false"><span aria-hidden="true">âˆ’</span></a></div></div><div class="leaflet-top leaflet-right"></div><div class="leaflet-bottom leaflet-left"></div><div class="leaflet-bottom leaflet-right"><div class="leaflet-control-attribution leaflet-control"><a href="https://leafletjs.com/" title="A JavaScript library for interactive maps"><svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"></path><path fill="#FFD500" d="M0 4h12v3H0z"></path><path fill="#E0BC00" d="M0 7h12v1H0z"></path></svg> Leaflet</a> <span aria-hidden="true">|</span> Â© OpenStreetMap contributors</div></div></div></div>

  <div id="qr-section">
    <p id="qrLabel">ğŸ“± QRì„ ìŠ¤ìº”í•´ì„œ ì°¸ì—¬í•´ë³´ì„¸ìš”!</p>
    <img src="./Emotion Open Source Map_files/saved_resource" alt="QR ì½”ë“œ">
  </div>

  <script src="./Emotion Open Source Map_files/leaflet.js.ë‹¤ìš´ë¡œë“œ"></script>
  <script>
    const map = L.map('map').setView([36.5, 127.5], 7);
    const markers = [];

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 18,
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    function getColorIcon(color) {
      return new L.Icon({
        iconUrl: `https://chart.googleapis.com/chart?chst=d_map_pin_icon&chld=music|${color}`,
        iconSize: [21, 34],
        iconAnchor: [10, 34],
        popupAnchor: [0, -34]
      });
    }

    function addLyric() {
      const lyric = document.getElementById('lyricInput').value.trim();
      const nickname = document.getElementById('nicknameInput').value.trim();
      const color = document.getElementById('colorSelect').value;

      if (!lyric || !currentLocation) {
        alert(currentLang === 'en' ? 'Please enter both lyric and location.' : 'ê°€ì‚¬ì™€ ìœ„ì¹˜ë¥¼ ëª¨ë‘ ì…ë ¥í•´ ì£¼ì„¸ìš”.');
        return;
      }

      const entry = {
        lat: currentLocation[0],
        lng: currentLocation[1],
        lyric,
        nickname,
        color
      };

      saveEntry(entry);
      addMarker(entry);

      document.getElementById('lyricInput').value = '';
      document.getElementById('nicknameInput').value = '';
    }

    function addMarker(entry) {
      const icon = getColorIcon(entry.color);
      const popupText = entry.nickname ? `<b>${entry.nickname}</b>: ${entry.lyric}` : entry.lyric;

      const popup = L.popup({ autoClose: false, closeOnClick: false })
        .setLatLng([entry.lat, entry.lng])
        .setContent(popupText)
        .addTo(map);

      const marker = L.marker([entry.lat, entry.lng], { icon }).addTo(map);
      markers.push(marker);
    }

    function saveEntry(entry) {
      const data = JSON.parse(localStorage.getItem('emotionPins') || '[]');
      data.push(entry);
      localStorage.setItem('emotionPins', JSON.stringify(data));
    }

    function loadEntries() {
      const data = JSON.parse(localStorage.getItem('emotionPins') || '[]');
      data.forEach(entry => addMarker(entry));
    }

    let currentLocation = null;

    function searchLocation() {
      const query = document.getElementById('searchInput').value.trim();
      if (!query) {
        alert(currentLang === 'en' ? 'Please enter a search term.' : 'ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }

      fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query)}`)
        .then(res => res.json())
        .then(data => {
          if (data && data.length > 0) {
            const result = data[0];
            const lat = parseFloat(result.lat);
            const lon = parseFloat(result.lon);
            currentLocation = [lat, lon];
            map.setView(currentLocation, 15);

            const temp = L.marker(currentLocation).addTo(map)
              .bindPopup(currentLang === 'en' ? 'Selected Location' : 'ì„ íƒëœ ìœ„ì¹˜').openPopup();

            setTimeout(() => map.removeLayer(temp), 1500);
          } else {
            alert(currentLang === 'en' ? 'No results found.' : 'ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.');
          }
        });
    }

    let currentLang = 'ko';
    function toggleLanguage() {
      const lang = document.getElementById('languageToggle').value;
      currentLang = lang;

      document.getElementById('nicknameInput').placeholder = lang === 'en' ? 'Nickname' : 'ë‹‰ë„¤ì„';
      document.getElementById('lyricInput').placeholder = lang === 'en' ? 'Enter a lyric line' : 'ê°€ì‚¬ í•œ ì¤„ì„ ì…ë ¥í•˜ì„¸ìš”';
      document.getElementById('searchInput').placeholder = lang === 'en' ? 'Search address or place' : 'ì£¼ì†Œ ë˜ëŠ” ì¥ì†Œëª… ê²€ìƒ‰';
      document.getElementById('searchBtn').textContent = lang === 'en' ? 'Search' : 'ê²€ìƒ‰';
      document.getElementById('addBtn').textContent = lang === 'en' ? 'Add to map' : 'ì§€ë„ì— ì¶”ê°€';
      document.getElementById('qrLabel').textContent = lang === 'en' ? 'ğŸ“± Scan the QR code to join!' : 'ğŸ“± QRì„ ìŠ¤ìº”í•´ì„œ ì°¸ì—¬í•´ë³´ì„¸ìš”!';
    }

    loadEntries();
  </script>



</body></html>
